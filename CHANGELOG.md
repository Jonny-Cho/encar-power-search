# Changelog

엔카 파워 서치 Chrome Extension의 모든 변경사항을 기록합니다.

## [1.0.5] - 2025-08-03
### 🚗 새로운 기능
- **보험사고 이력 표시**: 내차 보험사고 횟수와 총 수리비용을 빨간색 라벨로 표시
  - 타입 1, 2 사고를 내차사고로 분류 (타입 3 타인사고 제외)
  - 실제 사고 데이터 개수로 정확도 향상 (accidentCnt 대신 배열 길이 사용)
  - 팝업에서 표시/숨김 토글 제어 가능
- **소유자 변경이력 표시**: 소유자 변경 횟수를 보라색 라벨로 표시
  - ownerChanges 배열 데이터 활용
  - 팝업에서 표시/숨김 토글 제어 가능

### 개선
- 차량 이력 API 호출 통합으로 성능 최적화
  - 용도이력, 보험사고, 소유자 변경이력을 단일 API 호출로 처리
  - 불필요한 중복 API 호출 제거
- CSS 기반 라벨 표시/숨김 제어로 실시간 반응성 향상
  - 조건부 API 호출 대신 CSS 클래스로 토글 제어
  - 사용자 설정 변경 시 즉시 반영

### 추가
- 보험사고 이력 표시 토글 스위치 (팝업 설정)
- 소유자 변경이력 표시 토글 스위치 (팝업 설정)
- 새로운 라벨 스타일링
  - 보험사고 라벨: 빨간색 배경 (#dc3545)
  - 소유자 변경 라벨: 보라색 배경 (#6f42c1)
- CSS 클래스 기반 라벨 표시/숨김 제어 시스템

## [1.0.4] - 2025-08-03
### 🚗 핵심 기능 추가
- **사용이력 표시 기능**: 차량 목록에서 사용이력이 있는 차량을 "사용이력있음" 라벨로 표시
  - 엔카 API 연동을 통한 실시간 사용이력 정보 확인
  - 팝업에서 사용이력 표시 기능 ON/OFF 토글 가능
  - 배치 처리를 통한 효율적인 API 호출 (200개씩 병렬 처리)

### 추가
- 페이지당 최대 500개 보기 옵션 추가
  - 기존: 20, 30, 40, 50개
  - 확장: 100, 200, 300, 400, 500개까지 선택 가능
- 팝업에 "500개까지 보기 옵션 추가" 토글 기능

### 수정
- 사용이력 API 에러 핸들링 개선
  - 404 및 네트워크 오류 시 조용히 처리 (콘솔 로그 제거)
  - 에러 발생 시에도 확장 프로그램 정상 작동 보장
- Pagerow 토글 해제 시 원래 옵션(20-50)으로 정확히 복원
- knockout.js data-bind 속성 호환성 개선

### 성능 개선
- 사용이력 API 호출 배치 처리 (200개씩 병렬 처리)
- 사용이력 처리 안정성 향상

## [1.0.3] - 2025-08-02
### 추가
- 단순수리(Accident.F) 필터 옵션 추가
- 3단계 사고유무 필터링: 무사고 / 단순수리 / 사고있음
- 팝업에 단순수리 설명 추가 (외판부위만 수리)

### 수정
- 사고유무 필터 UI를 3개 옵션으로 확장
- URL 파라미터 처리 로직에 Accident.F 추가
- fallbackToggleAccidentFilter에서 모든 사고 타입 지원

## [1.0.2] - 2025-08-02
### 추가
- 우대등록 섹션 숨기기 토글 기능 추가
- 팝업 설정에서 우대등록 섹션 표시/숨김 제어 가능

### 수정
- 우대등록 섹션 선택자 정확도 개선
  - 기존: `.section.list:not(.special)` - 일반등록도 함께 숨겨지는 문제
  - 수정: `.section.list[data-bind*="specialSearchResults"]:not(.special)` - 우대등록만 정확히 타겟팅

## [1.0.1] - 2025-08-02
### 추가
- 사진우대 섹션 숨기기 토글 기능 추가
- Chrome Storage API를 통한 설정 영구 저장
- 팝업 UI에 토글 스위치 컴포넌트 추가

### 수정
- manifest.json에 storage 권한 추가
- HTTP 프로토콜 지원 추가 (http://www.encar.com)

## [1.0.0] - 2025-07-31
### 초기 릴리즈
- 엔카 검색 페이지에 "사고유무" 필터 추가
- 무사고 차량 필터링 기능
  - 무사고만 보기
  - 사고차량만 보기
  - 전체 보기
- 엔카 기존 UI와 자연스러운 통합
- URL 해시 파라미터를 통한 필터 적용
- 필터 상태 유지 (페이지 새로고침 시에도 유지)

---

형식: [Semantic Versioning](https://semver.org/lang/ko/)을 따릅니다.